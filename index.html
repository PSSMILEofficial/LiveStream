<div id="messages" style="height:300px; overflow-y:auto; border:1px solid #444; padding:10px;"></div>

<input id="nameInput" placeholder="Enter Name" style="width:40%; padding:8px;">
<input id="msgInput" placeholder="Enter Message" style="width:40%; padding:8px;">
<button onclick="sendMessage()">Send</button>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

<script>
    // YOUR FIREBASE CONFIG
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT.firebaseapp.com",
        databaseURL: "https://YOUR_PROJECT.firebaseio.com",
        projectId: "YOUR_PROJECT",
        storageBucket: "YOUR_PROJECT.appspot.com",
        messagingSenderId: "000000",
        appId: "1:0000:web:0000"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Random color for each viewer (admin always red)
    const userName = localStorage.getItem("viewerName") || ("Viewer" + Math.floor(Math.random() * 5000));
    let userColor;

    if (userName.toLowerCase() === "admin") {
        userColor = "red";
    } else {
        userColor = "#" + Math.floor(Math.random()*16777215).toString(16);
    }

    localStorage.setItem("viewerName", userName);

    function sendMessage() {
        const msg = document.getElementById("msgInput").value;

        if (msg.trim() === "") return;

        db.ref("messages").push({
            name: userName,
            text: msg,
            color: userColor
        });

        document.getElementById("msgInput").value = "";
    }

    db.ref("messages").on("child_added", (data) => {
        const msg = data.val();

        const msgElement = document.createElement("div");
        msgElement.innerHTML = `
            <b style="color:${msg.color};">${msg.name}</b>: 
            <span>${msg.text}</span>
        `;

        document.getElementById("messages").appendChild(msgElement);

        // Auto scroll
        const msgBox = document.getElementById("messages");
        msgBox.scrollTop = msgBox.scrollHeight;
    });
</script>
